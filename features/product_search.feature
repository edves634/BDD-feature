Feature: Поиск товаров
  Чтобы быстро находить нужные товары
  Как пользователь интернет-магазина
  Я хочу иметь возможность искать товары по ключевым словам и фильтрам

  # Контекст (подготовка данных)
  Background:
    Given в каталоге магазина есть следующие товары:
      | Название          | Категория   | Цена | Наличие |
      | iPhone 13 Pro     | Смартфоны   | 999  | Да      |
      | MacBook Pro 14"   | Ноутбуки    | 1999 | Да      |
      | AirPods Pro       | Наушники    | 249  | Нет     |
      | Galaxy S22        | Смартфоны   | 799  | Да      |

  ### Сценарий 1: Успешный поиск по ключевому слову
  Scenario: Поиск существующего товара
    Given я открыл главную страницу магазина
    When я ввожу в поисковую строку "iPhone"
    And нажимаю кнопку "Найти"
    Then в результатах поиска должен отображаться товар "iPhone 13 Pro"
    And количество найденных товаров должно быть не менее 1

  ### Сценарий 2: Поиск по категории
  Scenario: Фильтрация товаров по категории
    Given я открыл страницу "Ноутбуки"
    When я применяю фильтр "Цена: до 2000$"
    Then в результатах должен отображаться "MacBook Pro 14""
    And товар "iPhone 13 Pro" не должен отображаться

  ### Сценарий 3: Поиск отсутствующего товара
  Scenario: Поиск товара, которого нет в наличии
    Given я ввел в поиск "AirPods Pro"
    When я нажимаю "Найти"
    Then я должен увидеть сообщение "Товар отсутствует"
    And система должна предложить аналоги

  ### Сценарий 4: Поиск с пустым запросом
  Scenario: Пустой поисковый запрос
    Given я не ввожу текст в поисковую строку
    When я нажимаю "Найти"
    Then система должна показать все товары из каталога
    Or предложить ввести критерии поиска

  ### Сценарий 5: Поиск с учетом регистра
  Scenario: Поиск с разным регистром букв
    Given я ввожу "GALAXY S22"
    When я нажимаю "Найти"
    Then в результатах должен быть товар "Galaxy S22"
